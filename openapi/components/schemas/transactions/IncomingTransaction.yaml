allOf:
  - $ref: ./Transaction.yaml
  - type: object
    required:
      - receivedAmount
    properties:
      source:
        oneOf:
          - title: Account Source
            type: object
            required:
              - accountId
              - currency
            properties:
              accountId:
                type: string
                description: Source account identifier
                example: InternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
              currency:
                type: string
                description: Currency code for the source account
                example: USD
            description: Source account details
          - title: UMA Address Source
            type: object
            required:
              - umaAddress
            properties:
              umaAddress:
                type: string
                description: UMA address of the sender
                example: $sender@uma.domain.com
              currency:
                type: string
                description: Currency code for the source
                example: USD
            description: UMA address source details
      receivedAmount:
        $ref: ../common/CurrencyAmount.yaml
        description: Amount received in the recipient's currency
      reconciliationInstructions:
        $ref: ../common/ReconciliationInstructions.yaml
        description: Included for all transactions except those with "CREATED" status
      rateDetails:
        $ref: ./IncomingRateDetails.yaml
        description: Details about the rate and fees for the transaction.
      failureReason:
        $ref: ./IncomingTransactionFailureReason.yaml
        description: If the transaction failed, this field provides the reason for failure.
