allOf:
  - $ref: ./Transaction.yaml
  - type: object
    required:
      - type
      - sentAmount
      - source
    properties:
      type:
        type: string
        enum:
          - OUTGOING
      source:
        $ref: ./TransactionSourceOneOf.yaml
      sentAmount:
        $ref: ../common/CurrencyAmount.yaml
        description: Amount sent in the sender's currency
      receivedAmount:
        $ref: ../common/CurrencyAmount.yaml
        description: Amount to be received by recipient in the recipient's currency
      exchangeRate:
        type: number
        description: Number of sending currency units per receiving currency unit.
        exclusiveMinimum: 0
        example: 1.08
      fees:
        type: integer
        format: int64
        description: >-
          The fees associated with the quote in the smallest unit of the sending
          currency (eg. cents).
        minimum: 0
        example: 10
      quoteId:
        type: string
        description: The ID of the quote that was used to trigger this payment
        example: Quote:019542f5-b3e7-1d02-0000-000000000006
      paymentInstructions:
        type: array
        description: Payment instructions for executing the payment.
        items:
          $ref: ../common/PaymentInstructions.yaml
        example:
          - accountType: US_ACCOUNT
            accountNumber: "1234567890"
            routingNumber: "021000021"
            bankName: "Chase Bank"
            referenceCode: "REF123456"
          - accountType: SPARK_WALLET
            address: "spark1pgssyuuuhnrrdjswal5c3s3rafw9w3y5dd4cjy3duxlf7hjzkp0rqx6dj6mrhu"
            invoice: "lnbc15u1p3xnhl2pp5jptserfk3zk4qy42tlucycrfwxhydvlemu9pqr93tuzlv9cc7g3sdqsvfhkcap3xyhx7un8cqzpgxqzjcsp5f8c52y2stc300gl6s4xswtjpc37hrnnr3c9wvtgjfuvqmpm35evq9qyyssqy4lgd8tj637qcjp05rdpxxykjenthxftej7a2zzmwrmrl70fyj9hvj0rewhzj7jfyuwkwcg9g2jpwtk3wkjtwnkdks84hsnu8xps5vsq4gj5hs"
      refund:
        $ref: ../common/Refund.yaml
        description: The refund if transaction was refunded.
      rateDetails:
        $ref: ./OutgoingRateDetails.yaml
        description: Details about the rate and fees for the transaction.
      failureReason:
        $ref: ./OutgoingTransactionFailureReason.yaml
        description: If the transaction failed, this field provides the reason for failure.
