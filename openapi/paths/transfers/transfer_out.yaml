post:
  summary: Create a transfer-out request
  description: >
    Transfer funds from an internal account to an external account for a specific customer.
  operationId: createTransferOut
  tags:
    - Same-Currency Transfers
  security:
    - BasicAuth: []
  parameters:
    - name: Idempotency-Key
      in: header
      required: false
      description: >
        A unique identifier for the request. If the same key is sent multiple times,
        the server will return the same response as the first request.
      schema:
        type: string
        example: 550e8400-e29b-41d4-a716-446655440000
  requestBody:
    required: true
    content:
      application/json:
        schema:
          type: object
          required:
            - source
            - destination
          properties:
            source:
              type: object
              required:
                - accountId
              properties:
                accountId:
                  type: string
                  description: Reference to an internal account ID
                  example: InternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123
              description: Source internal account details
            destination:
              type: object
              required:
                - accountId
              properties:
                accountId:
                  type: string
                  description: Reference to an external account ID
                  example: ExternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
              description: Destination external account details
            amount:
              type: integer
              format: int64
              description: >-
                Amount in the smallest unit of the currency (e.g., cents for USD/EUR,
                satoshis for BTC)
              example: 12550
        examples:
          transferOut:
            summary: Transfer from internal to external account
            value:
              source:
                accountId: InternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123
              destination:
                accountId: ExternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965
              amount: 12550
  responses:
    '201':
      description: Transfer-out request created successfully
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/transactions/TransactionOneOf.yaml
    '400':
      description: Bad request - Invalid parameters
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error400.yaml
    '401':
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error401.yaml
    '404':
      description: Customer or account not found
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error404.yaml
    '500':
      description: Internal service error
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error500.yaml
