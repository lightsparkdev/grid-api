get:
  summary: Get exchange rates (currency map)
  description: |
    Retrieve cached exchange rates grouped by destination currency code.
    This endpoint is intended to validate map-style response modeling where destination
    currency codes are dynamic keys (for example, `destinationCurrencies["MXN"]`).
  operationId: getExchangeRatesNew
  tags:
    - Exchange Rates
  security:
    - BasicAuth: []
  parameters:
    - name: sourceCurrency
      in: query
      description: Filter by source currency code (e.g., USD)
      required: false
      schema:
        type: string
      example: USD
    - name: sendingAmount
      in: query
      description: Sending amount in the smallest unit of the source currency.
      required: false
      schema:
        type: integer
        format: int64
        minimum: 0
        default: 10000
      example: 10000
  responses:
    "200":
      description: Successful operation
      content:
        application/json:
          schema:
            type: object
            required:
              - data
            properties:
              data:
                $ref: ../../components/schemas/exchange_rates/ExchangeRatesNew.yaml
          examples:
            destinationCurrencyMap:
              summary: Exchange rates grouped by destination currency code
              value:
                data:
                  sourceCurrency:
                    code: USD
                    decimals: 2
                    name: US Dollar
                    symbol: "$"
                  sendingAmount: 10000
                  destinationCurrencies:
                    MXN:
                      code: MXN
                      decimals: 2
                      name: Mexican Peso
                      symbol: "$"
                    EUR:
                      code: EUR
                      decimals: 2
                      name: Euro
                      symbol: "EUR"
                  updatedAt: "2025-02-05T12:00:00Z"
    "400":
      description: Bad request - Invalid parameters
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error400.yaml
    "401":
      description: Unauthorized
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error401.yaml
    "500":
      description: Internal service error
      content:
        application/json:
          schema:
            $ref: ../../components/schemas/errors/Error500.yaml
