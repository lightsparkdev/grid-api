---
title: "Account Model"
description: "Internal accounts, external accounts, and how they work together"
---

Grid uses two types of accounts: **internal accounts** (Grid-managed balances) and **external accounts** (connected bank accounts and wallets). Understanding when to use each type is key to building efficient payment flows.

## Internal Accounts

**Internal accounts** are Grid-managed accounts that hold balances in specific currencies. They enable instant 24/7/365 transfers between Grid users.

### Characteristics

- Hold balance in a single currency (USD, EUR, BTC, etc.)
- Can send and receive funds instantly
- Grid handles custody and settlement
- Can be owned by platform or customers
- Accessed via unique account ID

### Platform vs Customer Internal Accounts

<Tabs>
  <Tab title="Platform Internal Accounts">
    **Use for:**
    - Settlement and liquidity management
    - Distributing rewards/incentives
    - Float management
    - Collecting fees

    ```bash
    POST /platform/internal-accounts

    {
      "currency": "USD"
    }
    ```

    Platform accounts don't belong to any specific customer.
  </Tab>

  <Tab title="Customer Internal Accounts">
    **Use for:**
    - Customer wallet balances
    - Holding funds for pending transactions
    - Multi-currency customer accounts

    ```bash
    POST /customers/internal-accounts

    {
      "customerId": "Customer:abc123",
      "currency": "EUR"
    }
    ```

    Customer accounts are associated with a specific customer.
  </Tab>
</Tabs>

### Creating Internal Accounts

```bash
curl -X POST https://api.lightspark.com/grid/2025-10-13/customers/internal-accounts \
  -u "$GRID_CLIENT_ID:$GRID_CLIENT_SECRET" \
  -H "Content-Type: application/json" \
  -d '{
    "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
    "currency": "USD"
  }'
```

**Response:**

```json
{
  "id": "InternalAccount:e85dcbd6-dced-4ec4-b756-3c3a9ea3d965",
  "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
  "currency": "USD",
  "balance": {
    "amount": 0,
    "currency": {"code": "USD", "symbol": "$", "decimals": 2}
  },
  "status": "ACTIVE",
  "fundingPaymentInstructions": {
    "reference": "GRID-IA-e85dcbd6",
    "destinationAccount": {
      "accountType": "US_ACCOUNT",
      "accountNumber": "1234567890",
      "routingNumber": "110000000",
      "beneficiary": {
        "beneficiaryType": "BUSINESS",
        "fullName": "Lightspark Grid"
      }
    }
  }
}
```

### Funding Internal Accounts

Internal accounts can be funded via multiple rails:

<Tabs>
  <Tab title="Bank Transfer (Push)">
    **ACH, Wire, SEPA, PIX, etc.**

    1. Get funding instructions from internal account
    2. Customer sends funds to provided account with reference
    3. Grid credits internal account when received
    4. Webhook notification sent

    ```json
    {
      "fundingPaymentInstructions": {
        "reference": "GRID-IA-e85dcbd6",
        "destinationAccount": {
          "accountType": "US_ACCOUNT",
          "accountNumber": "1234567890",
          "routingNumber": "110000000"
        }
      }
    }
    ```

    **Timing**: ACH (1-2 business days), Wire (same day), SEPA Instant (seconds)
  </Tab>

  <Tab title="Plaid (Pull)">
    **Instant account linking**

    1. Customer connects bank account via Plaid Link
    2. Create external account from Plaid token
    3. Use `/transfer-in` to pull funds

    ```bash
    POST /transfer-in

    {
      "source": {"accountId": "ExternalAccount:plaid-linked"},
      "destination": {"accountId": "InternalAccount:abc123"},
      "amount": 100000
    }
    ```

    **Timing**: ACH timing (1-2 business days)
  </Tab>

  <Tab title="Crypto Deposit">
    **Lightning or Layer 1**

    For Bitcoin/crypto internal accounts:

    ```json
    {
      "fundingPaymentInstructions": {
        "lightningAddress": "customer123@yourplatform.lightspark.com",
        "bitcoinAddress": "bc1q..."
      }
    }
    ```

    Customer sends crypto to provided address.

    **Timing**: Lightning (instant), Layer 1 (10-60 minutes)
  </Tab>

  <Tab title="Sandbox Funding">
    **Instant for testing**

    ```bash
    POST /sandbox/internal-accounts/{accountId}/fund

    {
      "amount": 100000
    }
    ```

    Instantly adds funds in sandbox environment.
  </Tab>
</Tabs>

### Checking Balances

```bash
curl -X GET https://api.lightspark.com/grid/2025-10-13/customers/internal-accounts/InternalAccount:abc123 \
  -u "$GRID_CLIENT_ID:$GRID_CLIENT_SECRET"
```

**Response:**

```json
{
  "id": "InternalAccount:abc123",
  "balance": {
    "amount": 500000,
    "currency": {"code": "USD", "symbol": "$", "decimals": 2}
  },
  "status": "ACTIVE"
}
```

Balance represents $5,000.00 (500,000 cents).

---

## External Accounts

**External accounts** represent bank accounts, crypto wallets, or other payment instruments outside of Grid for on-ramping or off-ramping funds.

### Characteristics

- Represent real-world accounts (bank accounts, crypto wallets)
- Used as funding sources or payout destinations
- Subject to verification and compliance screening
- Have associated beneficiary information
- Status indicates readiness for use

### Supported Account Types

<Tabs>
  <Tab title="US Bank Accounts">
    ```json
    {
      "accountType": "US_ACCOUNT",
      "accountNumber": "1234567890",
      "routingNumber": "110000000",
      "accountCategory": "CHECKING",
      "beneficiary": {
        "beneficiaryType": "INDIVIDUAL",
        "fullName": "Alice Johnson",
        "address": {
          "line1": "123 Main St",
          "city": "San Francisco",
          "state": "CA",
          "postalCode": "94105",
          "country": "US"
        }
      }
    }
    ```
  </Tab>

  <Tab title="IBAN (Europe)">
    ```json
    {
      "accountType": "IBAN_ACCOUNT",
      "iban": "DE89370400440532013000",
      "bic": "DEUTDEFF",
      "beneficiary": {
        "beneficiaryType": "INDIVIDUAL",
        "fullName": "Hans Schmidt"
      }
    }
    ```
  </Tab>

  <Tab title="PIX (Brazil)">
    ```json
    {
      "accountType": "PIX_ACCOUNT",
      "pixKey": "user@example.com",
      "pixKeyType": "EMAIL",
      "beneficiary": {
        "beneficiaryType": "INDIVIDUAL",
        "fullName": "Maria Silva",
        "taxId": "12345678900"
      }
    }
    ```
  </Tab>

  <Tab title="CLABE (Mexico)">
    ```json
    {
      "accountType": "CLABE_ACCOUNT",
      "clabe": "012345678901234567",
      "beneficiary": {
        "beneficiaryType": "INDIVIDUAL",
        "fullName": "Carlos Rodriguez"
      }
    }
    ```
  </Tab>

  <Tab title="UPI (India)">
    ```json
    {
      "accountType": "UPI_ACCOUNT",
      "upiId": "user@paytm",
      "beneficiary": {
        "beneficiaryType": "INDIVIDUAL",
        "fullName": "Priya Sharma"
      }
    }
    ```
  </Tab>

  <Tab title="Spark Wallet (Crypto)">
    ```json
    {
      "accountType": "SPARK_WALLET",
      "address": "alice@lightspark.com",
      "beneficiary": {
        "beneficiaryType": "INDIVIDUAL",
        "fullName": "Alice Johnson"
      }
    }
    ```
  </Tab>
</Tabs>

### Creating External Accounts

```bash
curl -X POST https://api.lightspark.com/grid/2025-10-13/customers/external-accounts \
  -u "$GRID_CLIENT_ID:$GRID_CLIENT_SECRET" \
  -H "Content-Type: application/json" \
  -d '{
    "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
    "currency": "USD",
    "accountInfo": {
      "accountType": "US_ACCOUNT",
      "accountNumber": "9876543210",
      "routingNumber": "110000000",
      "accountCategory": "CHECKING",
      "beneficiary": {
        "beneficiaryType": "INDIVIDUAL",
        "fullName": "Alice Johnson",
        "address": {
          "line1": "123 Main St",
          "city": "San Francisco",
          "state": "CA",
          "postalCode": "94105",
          "country": "US"
        }
      }
    }
  }'
```

**Response:**

```json
{
  "id": "ExternalAccount:a12dcbd6-dced-4ec4-b756-3c3a9ea3d123",
  "customerId": "Customer:019542f5-b3e7-1d02-0000-000000000001",
  "currency": "USD",
  "status": "PENDING",
  "accountInfo": {
    "accountType": "US_ACCOUNT",
    "accountNumber": "****3210",
    "routingNumber": "110000000"
  }
}
```

### External Account Status

External accounts progress through verification:

```
PENDING → ACTIVE
```

- **PENDING**: Created, undergoing verification/screening
- **ACTIVE**: Verified, ready for transactions
- **INACTIVE**: Disabled (can be reactivated)
- **REJECTED**: Failed verification

You'll receive `ACCOUNT_STATUS` webhooks as status changes.

### Using External Accounts

<Tabs>
  <Tab title="As Destination (Payout)">
    Send funds from internal account to external account:

    ```bash
    POST /transfer-out

    {
      "source": {"accountId": "InternalAccount:abc123"},
      "destination": {"accountId": "ExternalAccount:xyz789"},
      "amount": 100000
    }
    ```

    Or via quote for cross-currency:

    ```bash
    POST /quotes

    {
      "source": {"accountId": "InternalAccount:abc123"},
      "destination": {"accountId": "ExternalAccount:xyz789"},
      "lockedCurrencySide": "SENDING",
      "lockedCurrencyAmount": 100000
    }
    ```
  </Tab>

  <Tab title="As Source (Funding)">
    Pull funds from external account to internal account:

    ```bash
    POST /transfer-in

    {
      "source": {"accountId": "ExternalAccount:xyz789"},
      "destination": {"accountId": "InternalAccount:abc123"},
      "amount": 100000
    }
    ```

    Only works for "pullable" external accounts (e.g., linked via Plaid, debit cards).
  </Tab>
</Tabs>

---

## Account Combinations

Common patterns for combining internal and external accounts:

### Pattern 1: Prefunded Payouts

**Use case:** Send payouts from customer's prefunded balance

```
Customer Internal Account (USD) → External Bank Account (EUR)
```

1. Customer funds internal account via ACH
2. Create quote: Internal USD → External EUR
3. Execute quote
4. Recipient receives EUR in their bank

### Pattern 2: JIT Funded Payouts

**Use case:** On-demand payments without maintaining balance

```
Customer → Payment Instructions → Internal Account → External Account
```

1. Create quote with `source: {customerId}`
2. Grid provides payment instructions
3. Customer sends funds to instructions
4. Quote auto-executes when received
5. Recipient receives payout

### Pattern 3: Platform Rewards

**Use case:** Platform distributes Bitcoin rewards

```
Platform Internal Account (USD) → Customer External Wallet (BTC)
```

1. Platform funds its own internal USD account
2. Create quote: Platform Internal USD → Customer Spark Wallet
3. Execute with `immediatelyExecute: true`
4. Customer receives BTC instantly

### Pattern 4: Crypto On-Ramp

**Use case:** Customer buys Bitcoin

```
Customer External Bank → Customer Internal Account (USD) → Customer External Wallet (BTC)
```

1. Customer links bank via Plaid
2. Pull funds to internal USD account
3. Create quote: Internal USD → External Spark Wallet
4. Execute quote
5. BTC delivered to customer's wallet

## Best Practices

<AccordionGroup>
  <Accordion title="Create internal accounts per currency">
    Each internal account holds one currency. Create multiple accounts for multi-currency support:

    ```javascript
    const currencies = ['USD', 'EUR', 'BTC'];
    for (const currency of currencies) {
      await createInternalAccount({customerId, currency});
    }
    ```
  </Accordion>

  <Accordion title="Validate external accounts before use">
    Wait for `ACTIVE` status before using external accounts in transactions:

    ```javascript
    async function waitForAccountActivation(accountId, maxWaitMs = 60000) {
      const start = Date.now();
      while (Date.now() - start < maxWaitMs) {
        const account = await getExternalAccount(accountId);
        if (account.status === 'ACTIVE') return account;
        if (account.status === 'REJECTED') throw new Error('Account rejected');
        await new Promise(r => setTimeout(r, 2000)); // Wait 2s
      }
      throw new Error('Account activation timeout');
    }
    ```
  </Accordion>

  <Accordion title="Store funding instructions for customers">
    Save `fundingPaymentInstructions` to show customers how to add funds:

    ```javascript
    const account = await createInternalAccount({customerId, currency: 'USD'});
    await saveToDatabase({
      customerId,
      fundingInstructions: account.fundingPaymentInstructions
    });

    // Later, show to customer
    showDepositInstructions(account.fundingPaymentInstructions);
    ```
  </Accordion>

  <Accordion title="Use Plaid for better UX">
    Plaid provides instant account linking vs manual entry:

    ```javascript
    // Customer completes Plaid Link
    const {publicToken} = await plaidLink.open();

    // Exchange for Grid external account
    const externalAccount = await createExternalAccountFromPlaid({
      customerId,
      publicToken,
      accountId: plaidAccountId
    });
    ```
  </Accordion>
</AccordionGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Transaction Lifecycle" href="/platform-overview/core-concepts/transaction-lifecycle">
    See how payments flow through accounts
  </Card>
  <Card title="Quote System" href="/platform-overview/core-concepts/quote-system">
    Learn about cross-currency transfers
  </Card>
  <Card title="Sandbox Testing" href="/platform-overview/platform-features/sandbox-testing">
    Test account funding scenarios
  </Card>
  <Card title="Webhooks" href="/platform-overview/platform-features/webhooks">
    Monitor account status changes
  </Card>
</CardGroup>
